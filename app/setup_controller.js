const express = require('express');
const router = express.Router();

const db = require('./database');


/**
 * SETUP function for the PostgreSQL Database
 * @param {*} req - request object
 * @param {*} res - response object
 */
const setupPostgreDB = async (req, res) => {
    try {
        const response = await db.setupPostgreSQLDB();
        if (response) {
            res
                .status(200)
                .json({ status: 'table users created successfully' });
        }
    } catch (error) {
        res
            .status(error?.status || 500)
            .json({ status: `Error creating users table for PostgreSQL DB ${error?.message || error}`});
    }
};


/*
Endpoint conventions for this route:
GET "/setup/postgresql" 
GET "/setup/mysql" 
*/
router    
    .get('/postgresql', setupPostgreDB)


module.exports = router;